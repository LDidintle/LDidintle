<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Big Five Personality Test</title>
  </head>
  <body>
    <h1>Big Five Personality Test</h1>
    <form id="personalityTestForm">
      <!-- Questions for each trait, you can add more questions as needed -->
      <!-- Openness -->
      <!-- ... (The rest of the form from the first code) -->
      <fieldset class="questions">
        <legend>Openness:</legend>
        <!-- Add questions here -->
        <label
          >Question 1: Are you often open to trying new activities or
          experiences?</label
        >
        <select name="openness_q1">
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <label
          >Question 2: Do you enjoy exploring new ideas and concepts?</label
        >
        <select name="openness_q2">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <label
          >Question 3: Are you drawn to unconventional or avant-garde art and
          music?</label
        >
        <select name="openness_q3">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <label
          >Question 4: Do you frequently ponder abstract or philosophical
          questions?</label
        >
        <select name="openness_q4">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <label
          >Question 5:Are you comfortable with change and adapt well to new
          situations?</label
        >
        <select name="openness_q5">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
      </fieldset>

      <!-- Conscientiousness -->
      <fieldset class="questions">
        <legend>Conscientiousness:</legend>
        <!-- Add questions here -->
        <label
          >Question 1: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="conscientiousness_q1">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 2: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="conscientiousness_q2">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 3: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="conscientiousness_q3">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 4: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="conscientiousness_q4">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 5: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="conscientiousness_q5">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <!-- Add more questions for Conscientiousness here -->
      </fieldset>
      <fieldset class="questions">
        <legend>Extraversion:</legend>
        <!-- Add questions here -->
        <label
          >Question 1: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="extraversion_q1">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 2: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="extraversion_q2">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 3: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="extraversion_q3">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 4: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="extraversion_q4">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 5: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="extraversion_q5">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <!-- Add more questions for Conscientiousness here -->
      </fieldset>
      <fieldset class="questions">
        <legend>Agreeableness:</legend>
        <!-- Add questions here -->
        <label
          >Question 1: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="agreeableness_q1">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 2: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="agreeableness_q2">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 3: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="agreeableness_q3">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 4: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="agreeableness_q4">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 5: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="agreeableness_q5">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>

        <!-- Add more questions for Conscientiousness here -->
      </fieldset>
      <fieldset class="questions">
        <legend>Neuroticism:</legend>
        <!-- Add questions here -->
        <label
          >Question 1: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="neuroticism_q1">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 2: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="neuroticism_q2">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 3: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="neuroticism_q3">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 4: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="neuroticism_q4">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <label
          >Question 5: Do you often pay attention to details and strive for
          perfection?</label
        >
        <select name="neuroticism_q5">
          <!-- Corrected the name attribute to be unique -->
          <option value="1">Yes</option>
          <option value="0">No</option>
        </select>
        <div class="submit-button-container">
          <button type="button" onclick="calculatePersonality()">Submit</button>
      </div>
    </form>

    <div id="results"></div>

    <script>
      function calculatePersonality() {
        const form = document.getElementById("personalityTestForm");
        const resultsDiv = document.getElementById("results");

        const traits = [
          "Openness",
          "Conscientiousness",
          "Extraversion",
          "Agreeableness",
          "Neuroticism",
        ];
        const traitScores = [];

        // Loop through each trait and calculate the percentage
        for (const trait of traits) {
          let positiveAnswers = 0;
          const traitFieldset = form.querySelector(
            `fieldset legend:contains('${trait}:')`
          ).parentNode;

          // Randomly select 7 questions for each trait
          const questions = Array.from(traitFieldset.querySelectorAll("label"));
          const selectedQuestions = questions
            .sort(() => 0.5 - Math.random())
            .slice(0, 7);

          for (const question of selectedQuestions) {
            const selectElement = question.nextElementSibling;
            const answer = parseInt(selectElement.value);
            positiveAnswers += answer;
          }

          // Calculate the percentage
          const percentage = (positiveAnswers / 7) * 100;
          traitScores.push(percentage.toFixed(2));
        }

        // Display the results to the user
        let resultString = "";
        for (let i = 0; i < traits.length; i++) {
          resultString += `${traits[i]}: ${traitScores[i]}%\n`;
        }

        // Determine the main personality based on the trait with the highest score
        const mainTrait = traits[traitScores.indexOf(Math.max(...traitScores))];
        const mainPersonality = `Your main personality trait is: ${mainTrait}`;

        // Display the main personality
        resultString += mainPersonality;

        // Display the results on the DOM
        resultsDiv.innerText = resultString;
      }

      // Add an event listener to the submit button
      const submitButton = document.querySelector("button[type='button']");
      submitButton.addEventListener("click", calculatePersonality);
    </script>
  </body>
</html>
